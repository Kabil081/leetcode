class Solution {
    public int totalFruit(int[] fruits) {
        if(fruits.length==1) return 1;
        int fruit1=-1;
        int fruit2=-1;
        int count1=0;
        int count2=0;
        int max=0;
        int left=0,right=0;
        while(right<fruits.length && (fruit1==-1 || fruit2==-1)){
            if(fruit1==-1){
                fruit1=fruits[right];
                count1++;
            }else if(fruit1==fruits[right]){
                count1++;
            }else if(fruit2==-1){
                fruit2=fruits[right];
                count2++;
            }
            max=right-left+1;
            right++;
        }
        while(right<fruits.length){
            if(fruits[right]==fruit1) count1++;
            else if(fruits[right]==fruit2) count2++;
            else {
                while(left<=right && (count1>0 && count2>0)){
                    if(fruits[left]==fruit1) {
                        count1--;
                    }else if(fruits[left]==fruit2){ 
                        count2--;
                    }
                    left++;
                }
                if(count1==0){
                    fruit1=fruits[right];
                    count1++;
                }else if(count2==0){ 
                    fruit2=fruits[right];
                    count2++;
                }
            }
            max=Math.max(right-left+1,max);
            right++;
        }
        return max;
    }
}
