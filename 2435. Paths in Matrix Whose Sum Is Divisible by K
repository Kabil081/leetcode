class Solution{
    public int numberOfPaths(int[][] grid, int k){
        int m=grid.length;
        int n=grid[0].length;
        int dp[][][]=new int[m][n][k+1];
        dp[0][0][grid[0][0]%k]=1;
        for(int i=1;i<m;i++){
            int rem=grid[i][0]%k;
            for(int val=0;val<k;val++){
                dp[i][0][(rem+val)%k]=dp[i-1][0][val];
            }
        }
        int mod=1000000007;
        for(int j=1;j<n;j++){
            int rem=grid[0][j]%k;
            for(int val=0;val<k;val++){
                dp[0][j][(rem+val)%k]=dp[0][j-1][val];
            }
        }
        for(int i=1;i<m;i++){
            for(int j=1;j<n;j++){
                int rem=grid[i][j]%k;
                for(int val=0;val<k;val++){
                    int ind=(val+rem)%k;
                    int sum_1=dp[i-1][j][val];
                    int sum_2=dp[i][j-1][val];
                    dp[i][j][ind]=(sum_1+sum_2)%mod;
                }
            }
        }
        return dp[m-1][n-1][0];
    }
}
